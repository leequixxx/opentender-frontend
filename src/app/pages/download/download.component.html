<breadcrumb [crumbs]="crumbs"></breadcrumb>
<div class="container-outer downloads">
	<div class="container">
		<h1 class="container-title" i18n>Download</h1>
		<p class="container-subtitle" i18n>On this page you find all the tender data of this portal.</p>
	</div>
    <div class="download-table">
        <div class="download-column download-headline">
            <h1>{{current.name}}</h1><br>
            <ng-container i18n>Tenders</ng-container>: {{current.count | number}}
        </div>
        <div class="download-column download-csv">
            <h2>CSV</h2>
            <div *ngIf="current.formats.csv">
                <a class="download-button" href="/data/files/{{current.formats.csv.filename}}" download>
                    <div class="download-name">
                        <i class="icon-cloud-download"></i>
                        <span class="long-name">Digiwhist</span>
                        <span class="short-name">DIGI</span>
                        <span class="extra-short-name">D</span>
                    </div>
                    <div class="download-size">
                        {{current.formats.csv.size | formatFileSize}}
                    </div>
                </a>
            </div>
        </div>
        <div class="download-column download-json">
            <h2>JSON</h2>
            <div *ngIf="current.formats.json">
                <a class="download-button" href="/data/files/{{current.formats.json.filename}}" download>
                    <div class="download-name">
                        <i class="icon-cloud-download"></i>
                        <span class="long-name">Digiwhist</span>
                        <span class="short-name">DIGI</span>
                        <span class="extra-short-name">D</span>
                    </div>
                    <div class="download-size">
                        {{current.formats.json.size | formatFileSize}}
                    </div>
                </a>
            </div>
        </div>
        <div class="download-column download-json">
            <h2>&nbsp;</h2>
            <div *ngIf="current.formats.ocds">
                <a class="download-button" href="/data/files/{{current.formats.ocds.filename}}" download>
                    <div class="download-name">
                        <i class="icon-cloud-download"></i>
                        <span class="long-name">OCDS</span>
                        <span class="short-name">OCDS</span>
                        <span class="extra-short-name">O</span>
                    </div>
                    <div class="download-size">
                        {{current.formats.ocds.size | formatFileSize}}
                    </div>
                </a>
            </div>
        </div>
        <div class="download-column download-ndjson">
            <h2>NDJSON</h2>
            <div *ngIf="current.formats.ndjson">
                <a class="download-button" href="/data/files/{{current.formats.ndjson.filename}}" download>
                    <div class="download-name">
                        <i class="icon-cloud-download"></i>
                        <span class="long-name">Digiwhist</span>
                        <span class="short-name">DIGI</span>
                        <span class="extra-short-name">D</span>
                    </div>
                    <div class="download-size">
                        {{current.formats.ndjson.size | formatFileSize}}
                    </div>
                </a>
            </div>
        </div>
    </div>


	<div class="container" *ngIf="downloads | defined">
		<h2 class="h3">Other countries</h2>

	</div>

    <div class="download-header">
        <div class="download-column download-headline">
            Country
            <div class="header-count"><ng-container i18n>Tenders</ng-container></div>
        </div>
        <div class="download-column download">
            CSV
        </div>
        <div class="download-column download">
            JSON
        </div>
        <div class="download-column download">
            &nbsp;
        </div>
        <div class="download-column download">
            NDJSON
        </div>
    </div>

    <div class="download-row" *ngFor="let download of downloads; last as isLast" [ngClass]="{'last-row' : isLast}">
        <div class="download-column download-headline">
            <h1 class="download-name">{{download.name}}</h1>
            <div class="download-count">{{download.count | number}}</div>
        </div>
        <div class="download-column download-csv">
            <div *ngIf="download.formats.csv">
                <a class="download-button" href="/data/files/{{download.formats.csv.filename}}" download>
                    <div class="download-name">
                        <i class="icon-cloud-download"></i>
                        <span class="long-name">Digiwhist</span>
                        <span class="short-name">DIGI</span>
                        <span class="extra-short-name">D</span>
                    </div>
                    <div class="download-size">
                        {{download.formats.csv.size | formatFileSize}}
                    </div>
                </a>
            </div>
        </div>
        <div class="download-column download-json">
            <div *ngIf="download.formats.json">
                <a class="download-button" href="/data/files/{{download.formats.json.filename}}" download>
                    <div class="download-name">
                        <i class="icon-cloud-download"></i>
                        <span class="long-name">Digiwhist</span>
                        <span class="short-name">DIGI</span>
                        <span class="extra-short-name">D</span>
                    </div>
                    <div class="download-size">
                        {{download.formats.json.size | formatFileSize}}
                    </div>
                </a>
            </div>
        </div>
        <div class="download-column download-json">
            <div *ngIf="getOcdsSize(download.country)">
                <a class="download-button" href="/data/files/{{ getOcdsFilename(download.country) }}" download>
                    <div class="download-name">
                        <i class="icon-cloud-download"></i>
                        <span class="long-name">OCDS</span>
                        <span class="short-name">OCDS</span>
                        <span class="extra-short-name">O</span>
                    </div>
                    <div class="download-size">
                        {{getOcdsSize(download.country) | formatFileSize}}
                    </div>
                </a>
            </div>
        </div>
        <div class="download-column download-ndjson">
            <div *ngIf="download.formats.ndjson">
                <a class="download-button" href="/data/files/{{download.formats.ndjson.filename}}" download>
                    <div class="download-name">
                        <i class="icon-cloud-download"></i>
                        <span class="long-name">Digiwhist</span>
                        <span class="short-name">DIGI</span>
                        <span class="extra-short-name">D</span>
                    </div>
                    <div class="download-size">
                        {{download.formats.ndjson.size | formatFileSize}}
                    </div>
                </a>
            </div>
        </div>
    </div>

    <div class="container" *ngIf="downloads | defined">
		<h2 class="h3">Data description</h2>

	</div>

    <div class="container">
        <p>
            <a target="_blank" rel="noopener" href="https://standard.open-contracting.org/latest/en/">Open Contracting Data Standard</a>
        </p>
        <p>
            <a target="_blank" rel="noopener" href="https://docs.google.com/spreadsheets/d/13pGIpt47sMBnZ68E-N-hMLiErpDB1CQwZzd2MXIlq5U">JSON data description</a>
        </p>
        <p>
            <a target="_blank" rel="noopener" href="https://drive.google.com/file/d/1fb7CgXJ2dqpbYujZRF8RU0gEBHwOojGM/view?usp=sharing">CSV data description</a>
        </p>
    </div>

	<div class="container" *ngIf="downloads | defined">
		<p i18n>Files are compressed with <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Gzip">GZip</a>, which should be supported by your ZIP application.</p>
		<p i18n>* Due to the amount of entries and many JSON parser don't support the file size, DIGIWHIST Tender JSON data has also been saved as <a target="_blank" href="http://ndjson.org/">Newline Delimited JSON</a>.</p>
		<p i18n>The structure of entries is outlined in a <a target="_blank" rel="noopener" href="https://github.com/digiwhist/opentender-data/blob/master/shared/schema.json">JSON Schema File</a>.</p>
	</div>
</div>

